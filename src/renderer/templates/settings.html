<section id="view-settings" class="view">
    <div class="settings-container">
        <!-- Appearance Settings -->
        <div class="settings-section">
            <h3>Appearance</h3>
            <div class="settings-form">
                <div class="settings-row">
                    <div class="settings-label">
                        <span>Theme</span>
                        <small>Choose between light and dark mode</small>
                    </div>
                    <div class="theme-toggle">
                        <span class="theme-toggle-label" id="theme-label">Dark</span>
                        <label class="theme-switch">
                            <input type="checkbox" id="theme-toggle">
                            <span class="slider">
                                <svg class="icon icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="5"></circle>
                                    <line x1="12" y1="1" x2="12" y2="3"></line>
                                    <line x1="12" y1="21" x2="12" y2="23"></line>
                                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                    <line x1="1" y1="12" x2="3" y2="12"></line>
                                    <line x1="21" y1="12" x2="23" y2="12"></line>
                                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                                </svg>
                                <svg class="icon icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                                </svg>
                            </span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Account Settings -->
        <div class="settings-section">
            <h3>Account Settings</h3>
            <div class="settings-form">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="settings-email" class="form-input" readonly>
                </div>
                <div class="form-group">
                    <label>Current Password</label>
                    <input type="password" id="settings-current-password" class="form-input">
                </div>
                <div class="form-group">
                    <label>New Password</label>
                    <input type="password" id="settings-new-password" class="form-input">
                </div>
                <div class="form-group">
                    <label>Confirm New Password</label>
                    <input type="password" id="settings-confirm-password" class="form-input">
                </div>
                <button class="btn btn-primary" id="change-password-btn">Change Password</button>
            </div>
        </div>
        <div class="settings-section" id="admin-settings-section">
            <h3>System Settings</h3>
            <div class="settings-form">
                <div class="form-group">
                    <label>Company Name</label>
                    <input type="text" id="settings-company-name" class="form-input">
                </div>
                <div class="form-group">
                    <label>Timezone</label>
                    <select id="settings-timezone" class="form-select">
                        <option value="UTC">UTC</option>
                        <option value="America/New_York">Eastern Time</option>
                        <option value="America/Chicago">Central Time</option>
                        <option value="America/Denver">Mountain Time</option>
                        <option value="America/Los_Angeles">Pacific Time</option>
                        <option value="Europe/London">London</option>
                        <option value="Europe/Berlin">Berlin</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>QA Passing Score (%)</label>
                    <input type="number" id="settings-passing-score" class="form-input" min="0" max="100">
                </div>
                <button class="btn btn-primary" id="save-settings-btn">Save Settings</button>
            </div>
        </div>
        <div class="settings-section" id="database-viewer-section">
            <h3>Database Viewer (Debug)</h3>
            <div class="settings-form">
                <div class="form-group">
                    <label>Select Table</label>
                    <select id="db-table-select" class="form-select">
                        <option value="">-- Select Table --</option>
                        <option value="users">Users</option>
                        <option value="roles">Roles</option>
                        <option value="tickets">Tickets</option>
                        <option value="quality_reports">Quality Reports</option>
                        <option value="settings">Settings</option>
                    </select>
                </div>
                <button class="btn btn-secondary" id="db-view-btn">View Data</button>
                <div id="db-viewer-output" style="margin-top: 1rem; max-height: 400px; overflow: auto; background: var(--bg-secondary); padding: 1rem; border-radius: 8px; font-family: monospace; font-size: 12px; white-space: pre-wrap;"></div>
            </div>
        </div>
        
        <!-- Database Migrations (Admin Only) -->
        <div class="settings-section" id="migrations-section">
            <h3>Datenbank Migrationen</h3>
            <div class="settings-form">
                <div class="migration-item">
                    <div class="migration-info">
                        <strong>Verwaiste Test-Zuweisungen</strong>
                        <p>Weist alle Test-Zuweisungen ohne Test Durchlauf dem Standard-Durchlauf "Nicht Zugeteilt" zu.</p>
                        <span class="badge badge-secondary" id="orphaned-count-badge">Prüfe...</span>
                    </div>
                    <button class="btn btn-secondary" id="migrate-orphaned-btn">Migration ausführen</button>
                </div>
            </div>
        </div>
    </div>
</section>
